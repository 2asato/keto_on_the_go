<%- include ('../partials/header') -%>

    <div class="container">
        <header class="jumbotron">
            <div class="container text-center">
                    <i class="fas fa-map-marker-alt fa-3x"></i>

                <h1 class="font-weight-bold">Locations</h1>
                
                <p class="text-muted">View keto friendly locations in and around Seattle</p>
                <br>
                <a href="/locations/new" class="btn btn-sm btn-dark raleway text-center mt-3">Add New Location</a>
            </div>
        </header>        
    </div>

    <div class="container">

        <div class="row">

            <% locations.forEach(function(location) { %>
            <div class="card mb-3 mt-5 border-0">
                <div class="row no-gutters">
                    <div class="col-lg-4">
                        <div class="container">
                                <img src="<%= location.coverImage %>" class="card-img card-fluid" alt="...">

                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="card-body">
                            <h5 class="card-title raleway font-weight-bold"><%= location.name %></h5>
                            <p class="card-text text-muted"><%= location.description %></p><br>
                            <a href="/locations/<%= location._id %>" class="btn btn-sm btn-dark raleway mt-3">See More</a>    
                        </div>
                    </div>
                </div>
            </div>
            <% }) %>    
        </div>
    </div>

                <!-- pagination -->
                <div class="container mt-4">

                <nav aria-label="Page navigation">
                        <% if (pages && pages > 0) { %>
                        <ul class="pagination justify-content-center">
                            <% if (current == 1) { %>
                            <li class="page-item disabled"><a class="page-link raleway font-weight-bold">First</a></li>
                            <% } else { %>
                            <li><a class="page-link raleway" href="/locations">First</a></li>
                            <% } %>
                     
                            <% if (current == 1) { %>
                            <li class="page-item disabled"><a class="page-link raleway">«</a></li>
                            <% } else { %>
                            <li><a class="page-link raleway" href="/locations?page=<%= Number(current) - 1 %>">«</a></li>
                            <% } %>
                     
                            <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                            <% if (i !== 1) { %>
                            <li class="page-item disabled"><a class="page-link raleway">...</a></li>
                            <% } %>
                            <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                            <% if (i == current) { %>
                            <li class="active"><a class="page-link raleway"><%= i %></a></li>
                            <% } else { %>
                            <li><a class="page-link raleway" href="/locations?page=<%= i %>"><%= i %></a></li>
                            <% } %>
                            <% if (i == Number(current) + 4 && i < pages) { %>
                            <li class="page-item disabled"><a class="page-link raleway">...</a></li>
                            <% } %>
                            <% } %>
                     
                            <% if (current == pages) { %>
                            <li class="page-item disabled"><a class="page-link raleway">»</a></li>
                            <% } else { %>
                            <li><a class="page-link raleway" href="/locations?page=<%= Number(current) + 1 %>">»</a></li>
                            <% } %>
                     
                            <% if (current == pages) { %>
                            <li class="page-item disabled"><a class="page-link raleway font-weight-bold">Last</a></li>
                            <% } else { %>
                            <li><a class="page-link raleway font-weight-bold" href="/locations?page=<%= pages %>">Last</a></li>
                            <% } %>
                        </ul>
                        <% } %>
                    </nav>    
                </div>  0
                

<%- include ('../partials/footer') -%>
